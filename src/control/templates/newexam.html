<!DOCTYPE html>
<html>
<head>
    <title>Create New Exam</title>

<!-- JQuery -->
<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>

<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

<!-- Optional theme -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css" integrity="sha384-aUGj/X2zp5rLCbBxumKTCw2Z50WgIr1vs/PFN4praOTvYXWlVyh2UtNUU0KAUhAX" crossorigin="anonymous">

<!-- Latest compiled and minified JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

<!-- Helper Scripts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/js/bootstrap-select.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.7.5/css/bootstrap-select.min.css">

<!-- Select Upgrades -->
<link href="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.2-rc.1/css/select2.min.css" rel="stylesheet" />
<script src="//cdnjs.cloudflare.com/ajax/libs/select2/4.0.2-rc.1/js/select2.min.js"></script>
<link rel="stylesheet" href="css/select2-bootstrap.min.css">

<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

<link rel="stylesheet" href="js/codemirror/lib/codemirror.css">
<script src="js/codemirror/lib/codemirror.js"></script>
<script src="js/codemirror/addon/edit/matchbrackets.js"></script>
<link rel="stylesheet" href="js/codemirror/addon/hint/show-hint.css">
<script src="js/codemirror/addon/hint/show-hint.js"></script>
<script src="js/clike.js"></script>

<meta charset="utf-8"/>
<style>
.CodeMirror {
    height: 300px;
        border: 1px solid #000;
}
body {
    margin-top: 70px;
    margin-bottom: 70px;
}
textarea {
    width: 100%;
}
.question-group .form-group {
    margin-left: 20px;
        margin-right: 20px;
}
</style>
</head>

<body role="document">
{% from 'page_navigation.html' import topNavigation,footer %}
{{ topNavigation(user) }}

<div class="container" role="main">
    <h1>New Exam: {{data.uva_id}}:{{data.title}}</h1>
    <p>Fill out the form below to create a new exam.</p>

    <div class="row">
        <div class="col-md-12">

            <form method="POST" action="?c=create_exam">
                <input type="hidden" name="course" value="{{data.id}}">
                <div class="form-group">
                    <label for="name">Name</label>
                    <input type="text" class="form-control" id="name" name="name" placeholder="Exam Name">
                </div>
                <div class="question-group">
                    <h3>Question</h3>
                    <div class="form-group">
                        <label for="question[]">Text (use HTML tags)</label>
                        <textarea name="question[]" class="htmltext"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="code[]">Code (Java Syntax Highlighted)</label>
                        <textarea name="code[]" class="codetext"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="answer[]">Answer (Java Syntax Highlighted)</label>
                        <textarea name="answer[]" class="codetext"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="rubric[]">Rubric (Text Only)</label>
                        <textarea name="rubric[]" class="textonly"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="score[]">Max Points</label>
                        <input type="text" class="form-control" name="score[]" placeholder="">
                    </div>
                </div>

                <button id="addquestion" class="btn btn-primary">Add Question</button>
                &nbsp; 
                <button id="submit" type="submit" class="btn btn-default">Create Exam</button>
            </form>
        </div>
    </div>
</div>
<script>

    var mixedMode = {
        name: "htmlmixed",
        scriptTypes: [
            {
                matches: /\/x-handlebars-template|\/x-mustache/i,
                mode: null},
            {
                matches: /(text|application)\/(x-)?vb(a|script)/i,
                mode: "vbscript"
            }
        ]
    };
      loadTextareas();

      function loadTextareas() {
          $("textarea.textonly").each(function() {
              var obj = $(this);
              if (!obj.get(0).CodeMirror) {
                  obj.get(0).CodeMirror = CodeMirror.fromTextArea(obj.get(0), {
                      lineNumbers: true,
                      tabSize: 4
                  });
              }
          });
          $("textarea.htmltext").each(function() {
              var obj = $(this);
              if (!obj.get(0).CodeMirror) {
                  obj.get(0).CodeMirror = CodeMirror.fromTextArea(obj.get(0), {
                      lineNumbers: true,
                      tabSize: 4,
                      indentUnit: 4,
                      matchBrackets: true
                  });
                      //mode: mixedMode,
                      //selectionPointer: true
              }
          });
          $("textarea.codetext").each(function() {
              var obj = $(this);
              if (!obj.get(0).CodeMirror) {
                  obj.get(0).CodeMirror = CodeMirror.fromTextArea(obj.get(0), {
                      lineNumbers: true,
                      tabSize: 4,
                      indentUnit: 4,
                      matchBrackets: true,
                      mode: "text/x-java"
                  });
              }
          });
      }


        $('#addquestion').click(function(){
            var text = $('#questiontemplate').clone();
            var html = text.html();
            $('#addquestion').before(html);
            loadTextareas();
            return false;
        });

        $('#submit').click(function(){
            javaEditor.save();
            return true;
        });




    </script>
{{ footer() }}

<div style="display: none;" id="questiontemplate">
                <div class="question-group">
                    <h3>Question</h3>
                    <div class="form-group">
                        <label for="question[]">Text (use HTML tags)</label>
                        <textarea name="question[]" class="htmltext"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="code[]">Code (Java Syntax Highlighted)</label>
                        <textarea name="code[]" class="codetext"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="answer[]">Answer (Java Syntax Highlighted)</label>
                        <textarea name="answer[]" class="codetext"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="rubric[]">Rubric (Text Only)</label>
                        <textarea name="rubric[]" class="textonly"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="score[]">Max Points</label>
                        <input type="text" class="form-control" name="score[]" placeholder="">
                    </div>
                </div>
</div>
</body>
</html>

